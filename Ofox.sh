#!/bin/bash

# Create Directory for OrangeFox
mkdir OrangeFox
cd OrangeFox

# Just to be on safer side
export OUT_DIR=out
ulimit -n 16000

# Clone and Sync OrangeFox
git clone https://gitlab.com/OrangeFox/sync.git -b master
cd sync
./orangefox_sync.sh --branch 12.1 --path ~/OrangeFox/fox_12.1

# Clone OrangeFox tree
cd ~/OrangeFox/fox_12.1
rm -rf device/xiaomi/renoir
git clone https://github.com/Failedmush1/twrp_device_xiaomi_renoir -b fox-12.1-miui ./device/xiaomi/renoir

# Build Environment
set +e
source build/envsetup.sh
export ALLOW_MISSING_DEPENDENCIES=true
set -e
lunch twrp_renoir-eng && make clean && mka adbd bootimage
